{% extends 'base.html' %}
{% block title %}User Dashboard{% endblock %}

{% block content %}
<div class="dashboard-container">

    <div class="dashboard-header">
        <div>
            <h2>User Dashboard</h2>
            <p class="subtitle">Student Records (View Only)</p>
        </div>

        <a href="{% url 'accounts:logout' %}" class="btn logout">
            ğŸšª Logout
        </a>
    </div>

    <!-- Search -->
    <form method="get" class="search-form user-search">
        <input 
            type="text" 
            name="q" 
            placeholder="Search by name"
            value="{{ request.GET.q }}"
        >
        <button type="submit" class="btn search">ğŸ” Search</button>
    </form>

    <!-- Table -->
    <table class="student-table user-table">
        <thead>
            <tr>
                <th>Name</th>
                <th>Email</th>
                <th>Department</th>
                <th>Year</th>
                <th class="action-header">Status</th>
            </tr>
        </thead>

        <tbody>
        {% for s in students %}
            <tr>
                <td>{{ s.name }}</td>
                <td>{{ s.email }}</td>
                <td>{{ s.department }}</td>
                <td>{{ s.year }}</td>
               <td>
    {% if s.latest_status == "Present" %}
        <span class="status present">âœ… Present</span>
    {% elif s.latest_status == "Absent" %}
        <span class="status absent">âŒ Absent</span>
    {% else %}
        <span class="status not-marked">Not Marked</span>
    {% endif %}
</td>

            </tr>
        {% empty %}
            <tr>
                <td colspan="5" class="empty">
                    No students found
                </td>
            </tr>
        {% endfor %}
        </tbody>
    </table>

</div>
{% endblock %}
